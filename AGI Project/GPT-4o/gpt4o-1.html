<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Puzzle Solver</title>
  <style>
    table { border-collapse: collapse; margin: 10px 0; }
    td {
      width: 30px;
      height: 30px;
      text-align: center;
      border: 1px solid #ccc;
      font-weight: bold;
      font-family: monospace;
    }
    .container {
      display: flex;
      gap: 30px;
    }
    h2 { margin: 5px 0; }
  </style>
</head>
<body>
  <h1>Puzzle Grid Solver</h1>
  <div class="container">
    <div>
      <h2>Input</h2>
      <div id="inputGrid"></div>
    </div>
    <div>
      <h2>Generated Output</h2>
      <div id="generatedOutput"></div>
    </div>
    <div>
      <h2>Expected Output</h2>
      <div id="expectedOutput"></div>
    </div>
  </div>
  <script>
    const testInput = [
      [0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 1, 0, 0],
      [0, 0, 2, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 8, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 6, 0, 0, 0, 0, 0, 2, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0]
    ];

    const expectedOutput = [
      [0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 7, 0, 0],
      [0, 4, 0, 4, 0, 7, 1, 7, 0],
      [0, 0, 2, 0, 0, 0, 7, 0, 0],
      [0, 4, 0, 4, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 8, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 4, 0, 4],
      [0, 6, 0, 0, 0, 0, 0, 2, 0],
      [0, 0, 0, 0, 0, 0, 4, 0, 4]
    ];

    function solve(grid) {
      const n = grid.length;
      const result = grid.map(row => [...row]);

      const dx8 = [-1, -1, -1, 0, 0, 1, 1, 1];
      const dy8 = [-1, 0, 1, -1, 1, -1, 0, 1];

      const diagonals = [
        [-1, -1], [-1, 1],
        [1, -1], [1, 1]
      ];

      for (let i = 0; i < n; i++) {
        for (let j = 0; j < n; j++) {
          if (grid[i][j] === 1) {
            for (let d = 0; d < 8; d++) {
              const ni = i + dx8[d];
              const nj = j + dy8[d];
              if (ni >= 0 && ni < n && nj >= 0 && nj < n && result[ni][nj] === 0) {
                result[ni][nj] = 7;
              }
            }
          }
          if (grid[i][j] === 2) {
            for (const [di, dj] of diagonals) {
              const ni = i + di;
              const nj = j + dj;
              if (ni >= 0 && ni < n && nj >= 0 && nj < n && result[ni][nj] === 0) {
                result[ni][nj] = 4;
              }
            }
          }
        }
      }

      return result;
    }

    function renderGrid(containerId, grid) {
      const container = document.getElementById(containerId);
      const table = document.createElement('table');
      grid.forEach(row => {
        const tr = document.createElement('tr');
        row.forEach(cell => {
          const td = document.createElement('td');
          td.textContent = cell;
          tr.appendChild(td);
        });
        table.appendChild(tr);
      });
      container.appendChild(table);
    }

    const generated = solve(testInput);
    renderGrid("inputGrid", testInput);
    renderGrid("generatedOutput", generated);
    renderGrid("expectedOutput", expectedOutput);
  </script>
</body>
</html>
